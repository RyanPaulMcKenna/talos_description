<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="robot">

<xacro:property name="scale" value="0.001" />
<xacro:property name="inertia_scale" value="0.000000001" />
<xacro:property name="PI" value="3.14159" />

<xacro:property name="base_width" value="0.62265" />
<xacro:property name="base_height" value="0.37817" />
<xacro:property name="base_mass" value="0.22" />

<xacro:property name="body_width" value="0.4324" />
<xacro:property name="body_height" value="1.00318" />
<xacro:property name="body_mass" value="0.22" />

<xacro:property name="shoulder_length" value="0.2" />
<xacro:property name="shoulder_short_length" value="0.095" />
<xacro:property name="shoulder_offset" value="0.035" />
<xacro:property name="shoulder_width" value="0.10635" />
<xacro:property name="shoulder_height" value="0.22" />
<xacro:property name="shoulder_mass" value="0.22" />

<xacro:property name="upper_arm_length" value="0.55" />
<xacro:property name="upper_arm_short_length" value="0.4" />
<xacro:property name="upper_arm_width" value="0.02" />
<xacro:property name="upper_arm_height" value="0.15" />
<xacro:property name="upper_arm_mass" value="0.22" />

<xacro:property name="elbow_bracket_short_length" value="0.129" />
<xacro:property name="elbow_bracket_length" value="0.151" />
<xacro:property name="elbow_bracket_width" value="0.0651" />
<xacro:property name="elbow_bracket_height" value=".2073" />
<xacro:property name="elbow_bracket_mass" value="0.22" /> 

<xacro:property name="elbow_block_short_length" value="0.106" />
<xacro:property name="elbow_block_offset" value="0.0315" />
<xacro:property name="elbow_block_length" value="0.16822" />
<xacro:property name="elbow_block_width" value="0.06352" />
<xacro:property name="elbow_block_height" value="0.19493" />
<xacro:property name="elbow_block_mass" value="0.22" />

<xacro:property name="lower_arm_length" value="0.37" />
<xacro:property name="lower_arm_offset" value="0.066" />
<xacro:property name="lower_arm_wrist_offset" value="0.015" />
<!--<xacro:property name="lower_arm_short_length" value="0.345" /> --><!--X Y--> <!-- theirs ours-->
<xacro:property name="lower_arm_width" value="0.03" /> <!--Z X-->
<xacro:property name="lower_arm_height" value="0.14" /> <!--Y Z-->
<xacro:property name="lower_arm_mass" value="0.22" />

<xacro:property name="wrist_length" value="0.07238" />
<xacro:property name="wrist_width" value="0.0635" /> 
<xacro:property name="wrist_height" value="0.14" /> 
<xacro:property name="wrist_offset" value="0.0085" /> 
<xacro:property name="wrist_mass" value="0.22" />

<xacro:property name="grasper_base_length" value="0.08316" />
<xacro:property name="grasper_base_width" value="0.0889" /> 
<xacro:property name="grasper_base_height" value="0.0889" /> 
<xacro:property name="grasper_base_mass" value="0.22" />

<xacro:property name="stationary_claw_length" value="0.14529" />
<xacro:property name="stationary_claw_width" value="0.04283" /> 
<xacro:property name="stationary_claw_height" value="0.0862" /> 
<xacro:property name="stationary_claw_mass" value="0.22" />

<xacro:property name="movable_claw_length" value="0.12861" />
<xacro:property name="movable_claw_width" value="0.05207" /> 
<xacro:property name="movable_claw_height" value="0.07435" /> 
<xacro:property name="movable_claw_mass" value="0.22" />

<xacro:property name="movable_claw_joint_y_offset" value="0.041" />
<xacro:property name="movable_claw_joint_z_offset" value="0.018" />

<xacro:macro name="inertial_template" params="mass length width height">
 <inertial>
  <mass value="${mass}"/>
  <inertia ixx="${1/12*mass*(length*length+height*height)}" ixy="0.0" ixz="0.0" iyy="${1/12*mass*(length*length+width*width)}" iyz="0.0" izz="${1/12*mass*(width*width+height*height)}"/>
 </inertial>
</xacro:macro>

<link name="base_link">
  <visual>
    <origin xyz="0 0 ${base_height/2}" rpy="0 0 0"/>
    <geometry>
      <box size="${base_width} ${base_width} ${base_height}" />
    </geometry>
    <material name="white">
     <color rgba="1 1 1 1"/>
    </material>
  </visual>
  <collision>
    <origin xyz="0 0 ${base_height/2}" rpy="0 0 0"/>
    <geometry>
      <box size="${base_width} ${base_width} ${base_height}" />
    </geometry>
  </collision>
  <xacro:inertial_template mass="${base_mass}" length="${base_width}" width="${base_width}" height="${base_height}"/>
</link>
 
<link name="body_link">
 <visual>
  <origin xyz="0 0 ${body_height/2}" rpy="0 0 0"/>
  <geometry>
     <box size="${body_width} ${body_width} ${body_height}" />
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 0 ${body_height/2}" rpy="0 0 0"/>
  <geometry>
   <box size="${body_width} ${body_width} ${body_height}" />
  </geometry>
 </collision>
 <xacro:inertial_template mass="${body_mass}" length="${body_width}" width="${body_width}" height="${body_height}"/>
</link>

<link name="shoulder_link">
 <visual>
  <origin xyz="0 ${-shoulder_offset} ${-shoulder_height/2}" rpy="${PI/2} 0 ${PI/2}"/>
  <geometry>
     <mesh filename="package://rviztest/meshes/shoulder_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="${shoulder_width/2} ${(shoulder_length/2)-shoulder_offset} 0" rpy="0 0 0"/>
  <geometry>
   <box size="${shoulder_width} ${shoulder_length} ${shoulder_height}" />
  </geometry>
 </collision>
 <xacro:inertial_template mass="${shoulder_mass}" length="${shoulder_width}" width="${shoulder_length}" height="${shoulder_height}"/>
</link>

<link name="upper_arm_link">
 <visual>
  <origin xyz="${upper_arm_width/2} ${-(upper_arm_length-upper_arm_short_length)/2} ${-upper_arm_height/2}" rpy="0 0 ${PI/2}"/>
  <geometry>
     <mesh filename="package://rviztest/meshes/upper_arm_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 ${upper_arm_short_length/2} 0" rpy="0 0 0"/>
  <geometry>
   <box size="${upper_arm_width} ${upper_arm_length} ${upper_arm_height}" /> 
  </geometry>
 </collision>
 <xacro:inertial_template mass="${upper_arm_mass}" length="${upper_arm_width}" width="${upper_arm_length}" height="${upper_arm_height}"/>
</link>

<link name="elbow_bracket_link">
 <visual>
  <origin xyz="${elbow_bracket_width/2} 0 ${-elbow_bracket_height/2}" rpy="0 0 ${PI/2}"/>
  <geometry>
     <mesh filename="package://rviztest/meshes/elbow_bracket_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 ${elbow_bracket_length/2} 0" rpy="0 0 0"/>
  <geometry>
   <box size="${elbow_bracket_width} ${elbow_bracket_length} ${elbow_bracket_height}" /> 
  </geometry>
 </collision>
 <xacro:inertial_template mass="${elbow_bracket_mass}" length="${elbow_bracket_width}" width="${elbow_bracket_length}" height="${elbow_bracket_height}"/>
</link>

<link name="elbow_block_link">
 <visual>
  <origin xyz="-${elbow_block_width/2} ${elbow_block_length-elbow_block_offset} ${elbow_block_height/2}" rpy="${-PI/2} 0 ${-PI/2}"/> <!--${elbow_bracket_short_length} ${-elbow_block_height/2}-->
  <geometry>
     <mesh filename="package://rviztest/meshes/elbow_block_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 ${(elbow_block_length/2)-elbow_block_offset} 0" rpy="0 0 0"/>
  <geometry>
   <box size="${elbow_block_width} ${elbow_block_length} ${elbow_block_height}" />
  </geometry>
 </collision>
 <xacro:inertial_template mass="${elbow_block_mass}" length="${elbow_block_width}" width="${elbow_block_length}" height="${elbow_block_height}"/>
</link>

<link name="lower_arm_link">
 <visual>
  <origin xyz="-${lower_arm_width/2} ${lower_arm_length-lower_arm_offset} ${lower_arm_height/2}" rpy="${-PI/2} 0 ${-PI/2}"/>
  <geometry>
     <mesh filename="package://rviztest/meshes/lower_arm_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 ${lower_arm_length/2 - lower_arm_offset} 0" rpy="0 0 0"/>
  <geometry>
   <box size="${lower_arm_width} ${lower_arm_length} ${lower_arm_height}" />
  </geometry>
 </collision>
 <xacro:inertial_template mass="${lower_arm_mass}" length="${lower_arm_width}" width="${lower_arm_length}" height="${lower_arm_height}"/>
</link>

<link name="wrist_link">
 <visual>
  <origin xyz="-${wrist_width/2} ${wrist_length-wrist_offset} ${wrist_height/2}" rpy="${-PI/2} 0 ${-PI/2}"/>
  <geometry>
     <mesh filename="package://rviztest/meshes/wrist_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 ${wrist_length/2 - wrist_offset} 0" rpy="0 0 0"/>
  <geometry>
   <box size="${wrist_width} ${wrist_length} ${wrist_height}" />
  </geometry>
 </collision>
 <xacro:inertial_template mass="${wrist_mass}" length="${wrist_width}" width="${wrist_length}" height="${wrist_height}"/>
</link>

<link name="grasper_base_link">
 <visual>
  <origin xyz="-${grasper_base_width/2} 0 -${grasper_base_height/2}" rpy="0 0 0"/>
  <geometry>
     <mesh filename="package://rviztest/meshes/grasper_base_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 ${grasper_base_length/2} -${grasper_base_height/2}" rpy="0 0 0"/>
  <geometry>
   <box size="${grasper_base_width} ${grasper_base_length} ${grasper_base_height}" />
  </geometry>
 </collision>
 <xacro:inertial_template mass="${grasper_base_mass}" length="${grasper_base_width}" width="${grasper_base_length}" height="${grasper_base_height}"/>
</link>

<link name="stationary_claw_link">
 <visual>
  <origin xyz="${stationary_claw_width/2} 0 -${1.25*grasper_base_width/2}" rpy="0 -${PI/2} 0"/>
  <geometry>
     <mesh filename="package://rviztest/meshes/stationary_claw_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 ${stationary_claw_length/2} 0" rpy="0 0 0"/>
  <geometry>
   <box size="${stationary_claw_width} ${stationary_claw_length} ${stationary_claw_height}" /> <!-- will probably need a better collision element-->
  </geometry>
 </collision>
 <xacro:inertial_template mass="${stationary_claw_mass}" length="${stationary_claw_width}" width="${stationary_claw_length}" height="${stationary_claw_height}"/>
</link>

<link name="movable_claw_link">
 <visual>
  <origin xyz="${movable_claw_width/2 + 0.002} -0.01 0.025" rpy="0 ${PI} 0"/>
  <geometry>
     <mesh filename="package://rviztest/meshes/movable_claw_link.stl" scale="${scale} ${scale} ${scale}"/>
  </geometry>
  <material name="white">
   <color rgba="1 1 1 1"/>
  </material>
 </visual>
 <collision>
  <origin xyz="0 ${wrist_length/2 - wrist_offset} 0" rpy="0 0 0"/>
  <geometry>
   <box size="${wrist_width} ${wrist_length} ${wrist_height}" />
  </geometry>
 </collision>
 <xacro:inertial_template mass="${wrist_mass}" length="${wrist_width}" width="${wrist_length}" height="${wrist_height}"/>
</link>

<joint name="base_to_body" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI}" upper="${PI}"/>
 <axis xyz="0 0 1"/>
 <parent link="base_link" />	
 <child link="body_link" />
 <origin xyz="0 0 ${base_height}" rpy="0 0 0"/>
</joint>
 
<joint name="body_to_shoulder" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI/2}" upper="0"/>
 <axis xyz="0 0 1"/>
 <parent link="body_link" />	
 <child link="shoulder_link" />
 <origin xyz="${body_width/2} 0 ${body_height - shoulder_height/2}" rpy="0 0 0"/>
</joint>

<joint name="shoulder_to_upper_arm" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI/4}" upper="${PI/4}"/>
 <axis xyz="1 0 0"/>
 <parent link="shoulder_link" />	
 <child link="upper_arm_link" />
 <origin xyz="${shoulder_width/2} ${shoulder_short_length} 0" rpy="0 0 0"/> 
</joint>

<joint name="upper_arm_to_elbow_bracket" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI/4}" upper="${PI/4}"/>
 <axis xyz="1 0 0"/>
 <parent link="upper_arm_link" />	
 <child link="elbow_bracket_link" />
 <origin xyz="0 ${upper_arm_short_length} 0" rpy="0 0 0"/>
</joint>

<joint name="elbow_bracket_to_elbow_block" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI/4}" upper="${PI/4}"/>
 <axis xyz="0 0 1"/>
 <parent link="elbow_bracket_link" />	
 <child link="elbow_block_link" />
 <origin xyz="0 ${elbow_bracket_short_length} 0" rpy="0 0 0"/>
</joint>

<joint name="elbow_block_to_lower_arm" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI/4}" upper="${PI/4}"/>
 <axis xyz="1 0 0"/>
 <parent link="elbow_block_link" />	
 <child link="lower_arm_link" />
 <origin xyz="0 ${elbow_block_short_length} 0" rpy="0 0 0"/> 
</joint>

<joint name="lower_arm_to_wrist" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI/4}" upper="${PI/4}"/>
 <axis xyz="1 0 0"/>
 <parent link="lower_arm_link" />	
 <child link="wrist_link" />
 <origin xyz="0 ${lower_arm_length-lower_arm_offset-lower_arm_wrist_offset} 0" rpy="0 0 0"/> 
</joint>

<joint name="wrist_to_grasper_base" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI}" upper="${PI}"/>
 <axis xyz="0 1 0"/>
 <parent link="wrist_link" />	
 <child link="grasper_base_link" />
 <origin xyz="0 ${wrist_length - wrist_offset} 0" rpy="0 0 0"/> 
</joint>

<joint name="grasper_base_to_stationary_claw" type="fixed">
 <parent link="grasper_base_link" />	
 <child link="stationary_claw_link" />
 <origin xyz="0 ${grasper_base_length} 0" rpy="0 0 0"/> 
</joint>

<joint name="stationary_claw_to_movable_claw" type="revolute">
 <limit velocity="1.0" effort="1000.0" lower="${-PI/14}" upper="${PI/4}"/>
 <axis xyz="1 0 0"/>
 <parent link="stationary_claw_link" />	
 <child link="movable_claw_link" />
 <origin xyz="0 ${movable_claw_joint_y_offset} ${movable_claw_joint_z_offset}" rpy="0 0 0"/> 
</joint>

</robot>
